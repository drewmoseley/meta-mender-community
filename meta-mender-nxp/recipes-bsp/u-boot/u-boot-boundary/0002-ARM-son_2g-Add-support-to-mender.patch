From ec91c00a44fbf4a4a76108703ef7e145a9a237ae Mon Sep 17 00:00:00 2001
From: Drew Moseley <drew.moseley@northern.tech>
Date: Tue, 28 Apr 2020 19:41:23 +0000
Subject: [PATCH 2/2] ARM: son_2g: Add support to mender

Signed-off-by: Drew Moseley <drew.moseley@northern.tech>
---
 configs/son_2g_defconfig | 2 ++
 include/configs/son.h    | 4 ----
 2 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/configs/son_2g_defconfig b/configs/son_2g_defconfig
index 8770c07447..7abc7d52f3 100644
--- a/configs/son_2g_defconfig
+++ b/configs/son_2g_defconfig
@@ -50,6 +50,8 @@ CONFIG_OF_CONTROL=y
 CONFIG_ENV_IS_IN_MMC=y
 CONFIG_ENV_VARS_UBOOT_RUNTIME_CONFIG=y
 CONFIG_NET_RANDOM_ETHADDR=y
+CONFIG_BOOTCOUNT_LIMIT=y
+CONFIG_BOOTCOUNT_ENV=y
 CONFIG_IMX8M_LPDDR4=y
 CONFIG_USB_FUNCTION_FASTBOOT=y
 CONFIG_FASTBOOT_BUF_ADDR=0x40480000
diff --git a/include/configs/son.h b/include/configs/son.h
index f863b2451f..17ca5110b0 100644
--- a/include/configs/son.h
+++ b/include/configs/son.h
@@ -93,10 +93,6 @@
         (CONFIG_SYS_INIT_RAM_ADDR + CONFIG_SYS_INIT_SP_OFFSET)
 
 #define CONFIG_ENV_OVERWRITE
-#define CONFIG_ENV_SIZE			0x2000
-#define CONFIG_ENV_OFFSET               (-CONFIG_ENV_SIZE)
-#define CONFIG_SYS_MMC_ENV_DEV		0	/* USDHC1 */
-#define CONFIG_SYS_MMC_ENV_PART         1	/* mmcblk0boot0 */
 
 /* Size of malloc() pool */
 #define CONFIG_SYS_MALLOC_LEN		((CONFIG_ENV_SIZE + (2*1024) + (16*1024)) * 1024)
-- 
2.25.0

